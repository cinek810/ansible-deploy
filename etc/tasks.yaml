setup_hooks:
  - name: setup_ansible
    module: script
    opts:
      file: /etc/ansible-deploy/hooks/setup_work_dir.sh

play_items:
  - name: run_bin_true
    file: runBinTrue.yaml

tasks:
  - name: task_exec_bin_true
    play_items:
      - run_bin_true
    allowed_for:
      - group: test_group
        infra:
          - name: testInfra
            stages:
              - testing
            limit: []
      - group: root
        infra:
          - name: testInfra
            stages:
              - testing
              - prod
              - locked
            limit: []

  - name: task_empty
    play_items: []
    allowed_for:
      - group: root
        infra:
          - name: testInfra
            stages:
              - testing
            limit: []

  - name: root_only_task
    play_items:
      - run_bin_true
    allowed_for:
      - group: root
        infra:
          - name: testInfra
            stages:
              - testing
            limit: []

  - name: non_root_task
    play_items:
      - run_bin_true
    allowed_for:
      - group: test_group
        infra:
          - name: testInfra
            stages:
              - testing
            limit: []

  - name: task_with_limit
    play_items:
      - run_bin_true
    allowed_for:
      - group: testGroup
        infra:
          - name: testInfra
            stages:
              - testing
            limit:
              - testHost1
              - testHost2
          - name: testInfra2
            stages:
              - testing
            limit:
              - xyzHosts
              - xyzHost12
              - xyzHost58
